<mujoco model="costume_R2">
    <compiler angle="radian" meshdir="meshes/"/>

    <default>
        <joint damping="0.1" armature="0.01"/>
        <geom friction="1.2 0.005 0.0001" condim="3"/>

        <default class="visual_decoration">
            <geom type="mesh" contype="0" conaffinity="0" group="1"/>
        </default>

        <default class="rail_ext">
            <joint damping="20.0" armature="0.1"/>
        </default>

        <default class="wheel_ext">
            <joint damping="0.05" armature="0.01"/>
        </default>
    </default>

    <asset>
        <mesh name="base_link"     file="meshes/base_link.stl"/>
        <mesh name="LF_rail_link"  file="meshes/LF_rail_link.stl"/>
        <mesh name="LF_yaw_link"   file="meshes/LF_yaw_link.stl"/>
        <mesh name="LF_wheel_link" file="meshes/LF_wheel_link.stl"/>
        <mesh name="LR_rail_link"  file="meshes/LR_rail_link.stl"/>
        <mesh name="LR_yaw_link"   file="meshes/LR_yaw_link.stl"/>
        <mesh name="LR_wheel_link" file="meshes/LR_wheel_link.stl"/>
        <mesh name="RF_rail_link"  file="meshes/RF_rail_link.stl"/>
        <mesh name="RF_yaw_link"   file="meshes/RF_yaw_link.stl"/>
        <mesh name="RF_wheel_link" file="meshes/RF_wheel_link.stl"/>
        <mesh name="RR_rail_link"  file="meshes/RR_rail_link.stl"/>
        <mesh name="RR_yaw_link"   file="meshes/RR_yaw_link.stl"/>
        <mesh name="RR_wheel_link" file="meshes/RR_wheel_link.stl"/>

        <mesh name="base_0" file="meshes/base_0.obj" scale="0.2 0.2 0.2"/>
        <mesh name="base_1" file="meshes/base_1.obj" scale="0.2 0.2 0.2"/>
        <mesh name="base_2" file="meshes/base_2.obj" scale="0.2 0.2 0.2"/>
        <mesh name="base_3" file="meshes/base_3.obj" scale="0.2 0.2 0.2"/>
        <mesh name="base_4" file="meshes/base_4.obj" scale="0.2 0.2 0.2"/>

        <material name="mat_dark"    rgba="0.2 0.2 0.2 1"/>
        <material name="mat_grey"    rgba="0.5 0.5 0.5 1"/>
        <material name="mat_silver"  rgba="0.8 0.8 0.8 1"/>
    </asset>

    <worldbody>
        <body name="base_link" pos="-5.2 1.4 0.5">
            <freejoint name="floating_base"/>
            
            <site name="imu_site" pos="0 0 0" size="0.01" rgba="1 0 0 1"/>
            <inertial pos="0 0 0" mass="20.0" diaginertia="0.2 0.2 0.2"/>

            <geom type="mesh" mesh="base_link" rgba="1 1 1 0.5" contype="0" conaffinity="0" group="1"/>

            <body name="decorations" pos="0.32 -0.4 0.04">
                <geom class="visual_decoration" mesh="base_0" material="mat_dark"/>
                <geom class="visual_decoration" mesh="base_1" material="mat_silver"/>
                <geom class="visual_decoration" mesh="base_2" material="mat_grey"/>
                <geom class="visual_decoration" mesh="base_3" material="mat_dark"/>
                <geom class="visual_decoration" mesh="base_4" material="mat_silver"/>
            </body>

            <camera name="head_camera" pos="0.32 0 0.04" xyaxes="0 -1 0 0 0 1"/>

            <geom type="box" size="0.3 0.2 0.05" rgba="1 0 0 0.2" group="3"/>

            <body name="LF_rail_link" pos="0.30193 -0.654 0.33384" quat="0.707105 0 0 -0.707108">
                <joint name="LF_rail_joint" class="rail_ext" type="slide" axis="0 0 -1" range="0 0.25"/>
                <geom type="mesh" mesh="LF_rail_link" contype="0" conaffinity="0" group="1"/>
                
                <body name="LF_yaw_link" pos="0 0 -0.3778">
                    <joint name="LF_yaw_joint" type="hinge" axis="0 0 1"/>
                    <geom type="mesh" mesh="LF_yaw_link" contype="0" conaffinity="0" group="1"/>
                    
                    <body name="LF_wheel_link" pos="0 0 -0.0465" quat="0.65328 0.653282 -0.270599 -0.270598">
                        <joint name="LF_wheel_joint" class="wheel_ext" type="hinge" axis="0 0 -1"/>
                        <geom type="mesh" mesh="LF_wheel_link" contype="1" conaffinity="1"/>
                    </body>
                </body>
            </body>

            <body name="RF_rail_link" pos="-0.29807 -0.654 0.33384" quat="0.707105 0 0 -0.707108">
                <joint name="RF_rail_joint" class="rail_ext" type="slide" axis="0 0 -1" range="0 0.25"/>
                <geom type="mesh" mesh="RF_rail_link" contype="0" conaffinity="0" group="1"/>

                <body name="RF_yaw_link" pos="0 0 -0.3778">
                    <joint name="RF_yaw_joint" type="hinge" axis="0 0 1"/>
                    <geom type="mesh" mesh="RF_yaw_link" contype="0" conaffinity="0" group="1"/>

                    <body name="RF_wheel_link" pos="0 0 -0.0465" quat="0.270596 0.270597 -0.653283 -0.653281">
                        <joint name="RF_wheel_joint" class="wheel_ext" type="hinge" axis="0 0 -1"/>
                        <geom type="mesh" mesh="RF_wheel_link" contype="1" conaffinity="1"/>
                    </body>
                </body>
            </body>

            <body name="LR_rail_link" pos="0.30193 -0.054 0.33384" quat="0.707105 0 0 -0.707108">
                <joint name="LR_rail_joint" class="rail_ext" type="slide" axis="0 0 -1" range="0 0.25"/>
                <geom type="mesh" mesh="LR_rail_link" contype="0" conaffinity="0" group="1"/>

                <body name="LR_yaw_link" pos="0 0 -0.3778">
                    <joint name="LR_yaw_joint" type="hinge" axis="0 0 1"/>
                    <geom type="mesh" mesh="LR_yaw_link" contype="0" conaffinity="0" group="1"/>

                    <body name="LR_wheel_link" pos="0 0 -0.0465" quat="0.65328 0.653282 0.270599 0.270598">
                        <joint name="LR_wheel_joint" class="wheel_ext" type="hinge" axis="0 0 -1"/>
                        <geom type="mesh" mesh="LR_wheel_link" contype="1" conaffinity="1"/>
                    </body>
                </body>
            </body>

            <body name="RR_rail_link" pos="-0.29807 -0.054 0.33384" quat="0.707105 0 0 -0.707108">
                <joint name="RR_rail_joint" class="rail_ext" type="slide" axis="0 0 -1" range="0 0.25"/>
                <geom type="mesh" mesh="RR_rail_link" contype="0" conaffinity="0" group="1"/>

                <body name="RR_yaw_link" pos="0 0 -0.3778">
                    <joint name="RR_yaw_joint" type="hinge" axis="0 0 1"/>
                    <geom type="mesh" mesh="RR_yaw_link" contype="0" conaffinity="0" group="1"/>

                    <body name="RR_wheel_link" pos="0 0 -0.0465" quat="0.270596 0.270597 0.653283 0.653281">
                        <joint name="RR_wheel_joint" class="wheel_ext" type="hinge" axis="0 0 -1"/>
                        <geom type="mesh" mesh="RR_wheel_link" contype="1" conaffinity="1"/>
                    </body>
                </body>
            </body>
        </body>
    </worldbody>

    <actuator>
        <position name="LF_steer" joint="LF_yaw_joint" kp="300" ctrlrange="-3.14 3.14"/>
        <position name="RF_steer" joint="RF_yaw_joint" kp="300" ctrlrange="-3.14 3.14"/>
        <position name="LR_steer" joint="LR_yaw_joint" kp="300" ctrlrange="-3.14 3.14"/>
        <position name="RR_steer" joint="RR_yaw_joint" kp="300" ctrlrange="-3.14 3.14"/>
        <velocity name="LF_drive" joint="LF_wheel_joint" kv="20" ctrlrange="-100 100"/>
        <velocity name="RF_drive" joint="RF_wheel_joint" kv="20" ctrlrange="-100 100"/>
        <velocity name="LR_drive" joint="LR_wheel_joint" kv="20" ctrlrange="-100 100"/>
        <velocity name="RR_drive" joint="RR_wheel_joint" kv="20" ctrlrange="-100 100"/>
        <position name="LF_rail" joint="LF_rail_joint" kp="300" ctrlrange="0 0.25"/>
        <position name="RF_rail" joint="RF_rail_joint" kp="300" ctrlrange="0 0.25"/>
        <position name="LR_rail" joint="LR_rail_joint" kp="1000" ctrlrange="0 0.25"/>
        <position name="RR_rail" joint="RR_rail_joint" kp="1000" ctrlrange="0 0.25"/>
    </actuator>
</mujoco>